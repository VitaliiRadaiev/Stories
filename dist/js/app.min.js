class StoriesApi{static delay=400;static async fetch(e){const t=await fetch(e,{headers:{"Content-Type":"application/json"}});if(t.ok){const e=await t.json();return await new Promise((t=>{setTimeout((()=>{t(e)}),this.delay)}))}throw new Error("StoriesApi fetching error")}static async get({page:e,size:t}){const{companies:s}=await this.fetch("./public/data.json");return s.slice(t*(e-1),t*(e-1)+t)}static async getById({id:e}){const{companies:t}=await this.fetch("./public/data.json");return t.find((t=>t.id===e))}}function isSafari(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Android(){return navigator.userAgent.match(/Android/i)}function BlackBerry(){return navigator.userAgent.match(/BlackBerry/i)}function iOS(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)}function Opera(){return navigator.userAgent.match(/Opera Mini/i)}function Windows(){return navigator.userAgent.match(/IEMobile/i)}function isMobile(){return Android()||BlackBerry()||iOS()||Opera()||Windows()}function slideUp(e,t=500){e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e?.classList.remove("_slide")}),t)}function slideDown(e,t=500){e.style.removeProperty("display");let s=window.getComputedStyle(e).display;"none"===s&&(s="block"),e.style.display=s;let i=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=i+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e?.classList.remove("_slide")}),t)}function slideToggle(e,t=500){if(!e?.classList.contains("_slide"))return e?.classList.add("_slide"),"none"===window.getComputedStyle(e).display?this.slideDown(e,t):this.slideUp(e,t)}window.addEventListener("DOMContentLoaded",(()=>{isMobile()&&document.body.classList.add("mobile-device"),document.addEventListener("contextmenu",(function(e){"IMG"===e.target.tagName&&e.preventDefault(),"VIDEO"===e.target.tagName&&e.preventDefault()}));const e=document.documentElement.clientWidth;window.addEventListener("resize",(()=>{document.documentElement.clientWidth>=920&&e<920&&window.location.reload(),document.documentElement.clientWidth<920&&e>=920&&window.location.reload()}));{const u=document.querySelector('[data-slider="stories-nav"]');if(u){function t(e){return e.map((e=>{const t=document.createElement("div");return t.className="swiper-slide",t.insertAdjacentHTML("beforeend",`\n                <button data-action="open-stories" data-id="${e.id}" class="stories-nav-item">\n                    <img src="${e.logoUrl}" alt="">\n                </button>    \n            `),t}))}isMobile()&&document.documentElement.clientWidth<920?function(){let e=1,s=!1;const i=12,r=u.querySelector(".swiper"),n=u.querySelector(".swiper-wrapper"),o=18;async function a(r){s=!0;const n=t(await StoriesApi.get({page:e++,size:i}));Array.from(r.children).forEach((e=>e.remove())),r.append(...n),Math.ceil(o/i)<e&&r.style.setProperty("padding-left","0px"),s=!1}async function d(r){s=!0;const n=t(await StoriesApi.get({page:e++,size:i}));r.append(...n),s=!1}a(n),r.addEventListener("scrollend",(async t=>{if(t.target.scrollLeft<0){if(Math.ceil(n.children.length/i)+1!==e)return;await d(n),Math.ceil(o/i)<e&&n.style.setProperty("padding-left","0px")}}))}():function(){let e=1,s=!1;const i=15,r=u.querySelector(".swiper-wrapper"),n=new Swiper(u.querySelector(".swiper"),{speed:500,watchSlidesProgress:!0,watchSlidesVisibility:!0,slidesPerView:10,spaceBetween:20,slidesPerGroup:5,touchRatio:0,navigation:{nextEl:u.querySelector(".btn-left"),prevEl:u.querySelector(".btn-right")}});async function o(r){s=!0;const o=t(await StoriesApi.get({page:e++,size:i}));n.removeAllSlides(),n.appendSlide(o),s=!1}async function a(r){s=!0;const o=t(await StoriesApi.get({page:e++,size:i}));n.appendSlide(o),s=!1}o(r),n.on("slideChange",(t=>{if(t.isEnd){if(Math.ceil((t.visibleSlidesIndexes.at(-1)+1)/i)+1!==e)return;if(s)return;a(r)}}))}()}}class s{constructor(e){this.duration=e}onProgress(){}onEnd(){}play(){}pause(){}stop(){}}class i extends s{constructor({htmlContainer:e,url:t,duration:s}){super(s),this.htmlContainer=e,this.url=t,this.progressFns=[],this.endsFns=[],this.readyFns=[],this.canPlay=!1,this.isInit=!1}init(){this.htmlContainer.style.setProperty("background-image",`url(${this.url})`),this.animation=this._createAnimator({duration:1e3*this.duration,timing:e=>e,draw:e=>{this.progressFns.forEach((t=>t(e)))},onEnd:()=>{this.endsFns.forEach((e=>e()))}}),this.canPlay=!0,this.isInit=!0,this.readyFns.forEach((e=>e()))}play(){this.animation.start()}pause(){this.animation.pause()}stop(){this.animation?.reset()}onProgress(e){this.progressFns.push(e)}onEnd(e){this.endsFns.push(e)}onReady(e){this.readyFns.push(e)}_createAnimator=({timing:e,draw:t,duration:s,onEnd:i})=>{let r=null,n=null,o=null;const a=d=>{r||(r=d),n&&(r+=d-n,n=null);let l=(d-r)/s;l>1&&(l=1);let c=e(l);t(c),l<1?o=requestAnimationFrame(a):(i(),r=null)};return{start:()=>{o||(o=requestAnimationFrame(a))},pause:()=>{o&&(n=performance.now(),cancelAnimationFrame(o),o=null)},reset:()=>{o&&(cancelAnimationFrame(o),o=null),r=null,n=null}}}}class r extends s{constructor({htmlContainer:e,url:t,duration:s}){super(s),this.htmlContainer=e,this.url=t,this.progressFns=[],this.endsFns=[],this.readyFns=[],this.canPlay=!1,this.isInit=!1}init(){const e=document.createElement("video");e.setAttribute("muted","muted"),e.setAttribute("playsinline","playsinline"),e.setAttribute("disablepictureinpicture",""),e.setAttribute("controlslist","nodownload noplaybackrate"),e.setAttribute("type","video/mp4"),this.htmlContainer.append(e),this.player=videojs(e),this.player.src({type:"video/mp4",src:this.url}),this.player.ready((()=>{this.canPlay=!0,this.readyFns.forEach((e=>e()))})),this.player.on("timeupdate",((e,t)=>{const s=this.duration<=this.player.duration()?this.duration:this.player.duration(),i=this.player.currentTime(),r=i/s;this.progressFns.forEach((e=>e(Math.min(r,1)))),i>=s&&(this.player.pause(),this.endsFns.forEach((e=>e())))})),this.player.on("ended",(()=>{this.endsFns.forEach((e=>e()))})),this.isInit=!0}play(){this.player.play()}pause(){this.player.pause()}stop(){this.player.currentTime(0),this.player.pause()}onProgress(e){this.progressFns.push(e)}onEnd(e){this.endsFns.push(e)}onReady(e){this.readyFns.push(e)}}class n{constructor({storiesContainer:e,progressLineContainer:t,btnPlayPause:s,stories:i}){this.storiesContainer=e,this.progressLineContainer=t,this.btnPlayPause=s,this.duration=6,this.stories=this._createStories(i),this._isEnd=!1,this._isStart=!0,this.readyFns=[],this.endFns=[],this.changeFns=[],this.activeStoryIndex=0,this.prevActiveStoryIndex=0,this.prevItems=[],this.progressAnimation=!0}init(){this._createProgressLines(),this._setEvents();const e=this.stories[0];e&&e.onReady((()=>{this.readyFns.forEach((e=>e()))})),this._render()}play(){const e=this.stories[this.activeStoryIndex];this.prevItems.forEach(((t,s)=>{t&&t!==e&&t.stop()}));const t=()=>{e.canPlay?(e.play(),this.btnPlayPause&&this.btnPlayPause.classList.add("pause")):setTimeout((()=>{t()}),200)};t()}pause(){this.stories[this.activeStoryIndex].pause(),this.btnPlayPause&&this.btnPlayPause.classList.remove("pause")}next(){this.activeStoryIndex!==this.stories.length-1&&(this.activeStoryIndex++,this._updateProgressLines(),this._render(),this.play(),this.changeFns.forEach((e=>e())))}prev(){0!==this.activeStoryIndex&&(this.activeStoryIndex--,this._updateProgressLines(),this._render(),this.play(),this.changeFns.forEach((e=>e())))}reset(){this._isEnd=!1,this._isStart=!0,this.activeStoryIndex=0,this.prevActiveStoryIndex=0,this._updateProgressLines(),this.stories.forEach((e=>e.stop())),this.pause(),this._render()}get isEnd(){return this._isEnd}get isStart(){return this._isStart}onReady(e){this.readyFns.push(e)}onEnd(e){this.endFns.push(e)}onStoryChange(e){this.changeFns.push(e)}_createProgressLines(){const e=this.stories.map((e=>{const t=document.createElement("div");return t.className="progress-line",t.style.setProperty("--value","0%"),t}));this.progressLineContainer.append(...e)}_updateProgressLines(){Array.from(this.progressLineContainer.children).forEach(((e,t)=>{const s=this.activeStoryIndex;t<s?(e.classList.add("viewed"),e.classList.remove("active"),this._setProgress(e,0)):t===s?(e.classList.remove("viewed"),e.classList.add("active"),this._setProgress(e,0)):t>s&&(e.classList.remove("viewed"),e.classList.remove("active"),this._setProgress(e,0))}))}_createStories(e){return e.map((e=>{const t=document.createElement("div");t.className="stories-card__stories-item";return"image"===e.storyType?new i({htmlContainer:t,url:e.storyUrl,duration:this.duration}):new r({htmlContainer:t,url:e.storyUrl,duration:this.duration})}))}_render(){const e=this.activeStoryIndex,t=this.prevActiveStoryIndex,s=this.stories,i=this.prevItems,r=[s[e-1],s[e],s[e+1]];r.forEach(((s,r)=>{s&&(1===r?s.htmlContainer.classList.add("active"):s.htmlContainer.classList.remove("active"),i.includes(s)||(s.isInit||s.init(),t<e?this.storiesContainer.append(s.htmlContainer):this.storiesContainer.prepend(s.htmlContainer)))})),i.forEach((e=>{e&&(r.includes(e)||e.htmlContainer.remove())})),this.prevItems=r,this.prevActiveStoryIndex=e,this._checkIndexPosition()}_checkIndexPosition(){this.activeStoryIndex===this.stories.length-1?this._isEnd=!0:this._isEnd=!1,0===this.activeStoryIndex?this._isStart=!0:this._isStart=!1}_setEvents(){this.stories.forEach(((e,t)=>{const s=this.progressLineContainer.children[t];e.onProgress((e=>{this.activeStoryIndex===t&&this._setProgress(s,e)})),e.onEnd((()=>{this.isEnd?this.endFns.forEach((e=>e())):this.next()})),e.onReady((()=>{}))}))}_setProgress(e,t){this.progressAnimation?e.style.removeProperty("transition"):e.style.setProperty("transition","all 0s linear"),e.style.setProperty("--value",100*t+"%")}_removeProgressAnimation(){this.progressAnimation=!1,setTimeout((()=>{this.progressAnimation=!0}),300)}}class o{constructor({cardId:e,htmlShimmerElement:t}){this.cardId=e,this.htmlShimmerElement=t,this.htmlCardElement=null,this.stories=null,this.loadFns=[],this.canPlayFns=[],this.onEndFns=[],this.changeFns=[],this.onBeforeStartFns=[],this.storyCardData=null}async init(){try{const e=await StoriesApi.getById({id:this.cardId});this.storyCardData=e,this.loadFns.forEach((t=>t(e))),this._crateCard(e),this._initStories(e.stories),this._initEvents()}catch(e){console.log(e)}}onLoad(e){this.loadFns.push(e)}onCanPlay(e){this.canPlayFns.push(e)}onEnd(e){this.onEndFns.push(e)}onBeforeStart(e){this.onBeforeStartFns.push(e)}onStoryChange(e){this.changeFns.push(e)}play(){this.stories&&this.stories.play()}pause(){this.stories&&this.stories.pause()}next(){this.stories&&this.stories.next()}prev(){this.stories&&this.stories.prev()}hidePreview(){if(!this.htmlCardElement)return;this.htmlCardElement.querySelector(".stories-card__preview").style.setProperty("display","none")}showPreview(){if(!this.htmlCardElement)return;this.htmlCardElement.querySelector(".stories-card__preview").style.removeProperty("display")}_crateCard(e){this.htmlShimmerElement.insertAdjacentHTML("beforeend",`\n            <div class="stories-card__body">\n                <div class="stories-card__top">\n                    <div class="stories-card__progress-lines"></div>\n                    <div class="stories-card__nav">\n                        <a href="#" class="stories-card__nav-right">\n                            <img  alt="Business logo" src="${e.logoUrl}">\n                            ${e.companyTitle}\n                        </a>\n                        <div class="stories-card__nav-left">\n                            <button type="button" class="stories-card__play-pause-btn" >\n                                <img class="play-icon" src="data:image/svg+xml,%3csvg%20width='12px'%20height='20px'%20viewBox='0%200%2018%2018'%20xmlns='http://www.w3.org/2000/svg'%20fill='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M4.154%200C2.964%200%202%20.951%202%202.125v13.75c0%20.784.437%201.504%201.138%201.874.7.37%201.55.329%202.211-.106l9.693-6.875A2.117%202.117%200%200016%209c0-.71-.36-1.374-.96-1.768L5.349.357A2.172%202.172%200%20004.154%200z'%20fill='%23ffffff'%20fill-rule='nonzero'%3e%3c/path%3e%3c/g%3e%3c/svg%3e" alt="play">\n                                <img class="pause-icon" src="data:image/svg+xml,%3csvg%20width='14px'%20height='20px'%20viewBox='0%200%20512%20512'%20xmlns='http://www.w3.org/2000/svg'%20fill='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20fill='%23ffffff'%20d='M120.16%2045A20.162%2020.162%200%200%200%20100%2065.16v381.68A20.162%2020.162%200%200%200%20120.16%20467h65.68A20.162%2020.162%200%200%200%20206%20446.84V65.16A20.162%2020.162%200%200%200%20185.84%2045h-65.68zm206%200A20.162%2020.162%200%200%200%20306%2065.16v381.68A20.162%2020.162%200%200%200%20326.16%20467h65.68A20.162%2020.162%200%200%200%20412%20446.84V65.16A20.162%2020.162%200%200%200%20391.84%2045h-65.68z'%3e%3c/path%3e%3c/g%3e%3c/svg%3e" alt="pause">\n                            </button>\n                            <div class="stories-card__dropdown drop-down">\n                                <div class="drop-down__icon">\n                                    <img src="data:image/svg+xml,%3csvg%20width='22'%20height='22'%20viewBox='0%200%2022%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.67343%2010.2588C8.26972%2010.2588%208.75311%2010.7422%208.75311%2011.3385C8.75311%2011.9348%208.26972%2012.4181%207.67343%2012.4181C7.07714%2012.4181%206.59375%2011.9348%206.59375%2011.3385C6.59375%2010.7422%207.07714%2010.2588%207.67343%2010.2588ZM11.1284%2010.2588C11.7247%2010.2588%2012.2081%2010.7422%2012.2081%2011.3385C12.2081%2011.9348%2011.7247%2012.4181%2011.1284%2012.4181C10.5321%2012.4181%2010.0487%2011.9348%2010.0487%2011.3385C10.0487%2010.7422%2010.5321%2010.2588%2011.1284%2010.2588ZM14.5834%2010.2588C15.1797%2010.2588%2015.6631%2010.7422%2015.6631%2011.3385C15.6631%2011.9348%2015.1797%2012.4181%2014.5834%2012.4181C13.9871%2012.4181%2013.5037%2011.9348%2013.5037%2011.3385C13.5037%2010.7422%2013.9871%2010.2588%2014.5834%2010.2588Z'%20fill='white'/%3e%3c/svg%3e" alt="ellipsis">\n                                </div>\n                                <div class="drop-down__content">\n                                    <ul>\n                                        <li>\n\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                            <button type="button" class="stories-card__close" data-action="close-stories" >\n                                <img id="actionImg" class="p-1" src="data:image/svg+xml,%3csvg%20width='24'%20height='25'%20viewBox='0%200%2024%2025'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6%2018.5L18%206.5M6%206.5L18%2018.5'%20stroke='white'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e" alt="x-icon">\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div class="stories-card__stories">\n                </div>\n                <div class="stories-card__info">\n                    <div class="stories-card__info-item">\n                        כל הארץ \n                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEkAAABJCAYAAABxcwvcAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAARKSURBVHgB7Zz7VdswFMY/evp/6QRVJ6hHcDfoBk0ngA1IJyidgGxAN3A2ACZImACY4Kt0ZB9kSQ6+cmIrwb9z7olx/JCv70uPAMzMzMzMzJwaZ5gIkoX+MPJNy7kW5Xz9rGWr5VHL/dnZ2RrvAa2Ucy2XWiotT5RTaVloUTg1auVcJSqmi5sxlXUwdzPK0R8XWi5h3SlG41b33v7zWood5xpWWn5rd9zi2NAKKrVs2O02xu2Kntcq+OqmMTZaFjgmaF2ry0VKDMC4mJZVx/WvcAzUiohZjsIe2aGsW1o3z5OIgkygvsQBoc12G+++d1kqKqKgDUfKPrVV+Yq6RU4wjEGjKchpQ0xRf5ADtFlsUgU5bYkp6gemhLZI3HgxSGFCakU9eW2aLj5F3OygQbovxnqycLv6jbncICNoSwEXhbFhmM0UMiLidtcYQFLfzcQivA5trHTf6RcSoa3C3SET05970LLW171HIvq6S/3RVOHmml/19Z4xBrQF3GAros2MFXdTDbi+HxLGi5mev98hAX3eBWUk9cvYfgkVxoJtXxe/HcY7wE+18m/YPSgnVhTt6IF7j8OXA7TDFi69hjuc81Xk4ZexxtcP6CurhIDI/UTnJ0GvBoEQhjGoeOP4wlOU2GU40PINHyDDfShR5qENwKWz6/db2av+/q+zq0ywhq2zrZCAVEnK2X6EDLcfZVJx39rluj6+QeTisOVEg0ICUiV9cbafIKNlhX1rlvq4tbPrG2S49/mEBKRK2hdbyHhxthVkDC4gpUraV8WqIMO1gC1kDE77UiW5b/QzZLhBuqCsZimd7QfIcEPECxKQKmnrbEtjwz9n2yioVzrWyrxA2xrWkOGeu8WhYdhvE5lyYp3Eqesk6Q0HVbCRhzZcRY7rmhpXEBC5X4kx8Bq+hBC2+1MN5poVbd/tlvG+2xJCvHtJS5Z02J4UTOpZ0/bXJCyRANvu/Q9jwXCGpEQCtK5bvaGcauD1XRZI5CPkmFRu6qUmaJeQZxzUK0G+08YZ02Vxs6VJ80MXb114f68xJvrBrp03NO20TQdsT3eNP1ERcbklMoJhqVJiCtiOJ1lZk2dF4w3bRhqSpTUxHB5eYEoi1qQwIQzXA0xnRV6jmEujmOukKduZzjDJmgCGwTqfqXdmsLok4mYb5mJFDQyD+Khux3CBxAI5EnG7UZa8MMxmWa1waVG73Z3X4J84IAzXIm2Y8+pbA+MrzaRTQEPupXAMdLxdhT3C+PrILFba9YbheNHe3IBhNjUscYwwXLG/l0XoDOPeCscMw0G1QYpiWFHnufpfAuMZL+nBGP/VwXErqKEjhvRWVH3+bURBCqcE49no7q0H7bDE01NQQ4eiOh9YevzJsMMyCu+4ggmWdzJ0xBjW+0x9VUW+O/4slgLDDnEXK7xnuHsm9+C/vOzLZP9hooGvC06bEYPmZxPXo/3MYWZmZmZmZmZmJon/actBvNX5awcAAAAASUVORK5CYII=" alt="location">\n                    </div>\n                    <div class="stories-card__info-item">\n                        תחום \n                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAA6CAYAAAAA0F95AAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKVSURBVHgB7Zv/ddowEMe/7uv/ZYO6EzQjiA3YIDBBRoBOkHQC6ATNBnYnCJ0AdwLoBJdTdArCMf5tvzjS5717lmUhTl8LyT4JIOA3EQaGiGI+KDQni6IoxVTRDWdLqBsHtgWmiDjfFwoD8RkDwA4v+RDLacb2k+2EZii2W0lv2b5hKtBl14/Rkr7qKeMThiGWox7IMrTnT0GdvTKUAJMhCADPuZgFhhhoOtb5xUnHffhXOCZxxXdsR/KHLYmYEZk5ewv/SLk3zLUAT3xyI5k7fHwUzlPqHE63SOABusc7bV6GaRCeEwSA5wQB4DlBAHhOEACeEwSA5wQB4DmuADMaKPb+XiCzwnSXz3Q5uuGij4JuOBWvUy70xQ0V8yTBgxgTRBq9puJY50FCga+FdcT1ga6TiFAKLSETeD3UsC3bDA3Rn5FG31P5wux9WSWWsgjx0RWkjrMicBM2NetcSIMTuu6z9deydOuJ8gJIMmVb4bxCqyr80Su/e5iV4H9yzCRfm17jt8pnJfXETpk520zy7PErTADX5lX584vtUb7fRr5XHA3eFX7KUSnJ5c9E7R2ZsaELClegbnsKtF/6Z/ymV1IuEOpeq7U/gBU7iZKPVhCYO6HYvsPckRuMRwbTS//C3Om9+NiYVhsk5MtSsVdYGC2C7a6xpPXylkKz5W0r+H9JZ9Y6Lre/odcdIuzcviifzKC2Rn1OXNcKIzDIFpkK1izI7ZVrjae/rowlQIpzD1A1y4/CKC9Dst/vR83iTcp2ZrSfAIugH5weUNHN+x7kqhh1DJDZo9V0NRQhHgDPCQLAc4IA8JwgADwnCADPCZulc+f6Of0l3MUvLr/xzp7bO+CG6y7alI8Kb9AscjM1dEjt4r9Hz1mjhUbM6z8yAAAAAElFTkSuQmCC" alt="suitcase">\n                    </div>\n                    <div class="stories-card__info-item">\n                        34 לשעה \n                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIXSURBVHgB7dvxUcIwFAbwr57/wwaygY4AG7CBOIFuIG7gBuIE4gTUDdzAMoE4QX1Pq3KQ+pICBZLvd5erBmPha5qm1wAQERERERERHZgMW1SWZU82WrpV+dFZ+d3H3FG3qMrXz1mWvcL/ffVX/5e0n2KXZMddKddSZlLey3bNAt7nyNH+zaftKRqSHQxl84DwnnFUTtCAhDOWzRMiD0cFB1SFc4tEBJ1iei7DDmd5IFUFNqO9tIdj6K06sNUMmFqvg/UZdqBmkD2sQbrqPT3HS3qpHcglc4EIhYxBl466AhGHo7wCKt0TLTWOORzl24MuauqfETnfgM4ddXnsvUf5BuS6xEYfjtokoAIJaHSrkZJNAor+Pkw1vpsPIdOEPtYnmYUM8jkOXCsB4XuSOVqpm0jJceA4BhkYkIEBGRiQgQEZGJCBARkYkIEBGRiQgQEZjiIguamdZOsGaAF7kIEBGRiQIZWAOo66Ah5SCajvqPN6KpNKQK4Hnzk8RB+QsejCFHVA1ZoC13omfWDwAg/RBlSFo8sEe46X7+GpracaLt3qQ6yRo1vUNaprg79VaLqIqy9lWPN3BQIWXewzoCFqPoSEgB0a/3cAVqU2UdRwHkMapBKQznluJJw7BNrnKdaWXMpVyGm1rK2A9AgWWP8Oxy72o0XnOLmUqQQzxwa2+mWWJmRA1sA6aO4jhZVuRERERERERL8+AZ1TT9IC/N6+AAAAAElFTkSuQmCC" alt="dollar">\n                    </div>\n                </div>\n            </div>\n            <div class="stories-card__footer">\n                <div class="stories-card__description"></div>\n                <button type="button" class="stories-card__apply">\n                    נראה כמו כיוון\n                </button>\n            </div>\n            <div class="stories-card__preview">\n                <div class="stories-card__preview-img" style="background-image: url(${e.storyPreview});">\n          \n                </div>\n                <div class="stories-card__preview-logo">\n                    <img  alt="Business logo" src="${e.logoUrl}">\n                    <div class="stories-card__preview-company-title">\n                        ${e.companyTitle}\n                    </div>\n                </div>\n            </div>    \n        `),this.htmlShimmerElement.className="stories-card",this.htmlShimmerElement.setAttribute("data-id",e.id),this.htmlCardElement=this.htmlShimmerElement,this.htmlShimmerElement=null}_initStories(e){const t=new n({storiesContainer:this.htmlCardElement.querySelector(".stories-card__stories"),progressLineContainer:this.htmlCardElement.querySelector(".stories-card__progress-lines"),btnPlayPause:this.htmlCardElement.querySelector(".stories-card__play-pause-btn"),stories:e});this.stories=t,t.onReady((()=>{this.canPlayFns.forEach((e=>e()))})),t.onEnd((()=>{this.onEndFns.forEach((e=>e()))})),t.onStoryChange((()=>{this.changeFns.forEach((e=>e()))})),t.init()}_initEvents(){if(!this.stories)return;if(!this.htmlCardElement)return;const e=this.htmlCardElement.querySelector(".stories-card__play-pause-btn"),t=this.htmlCardElement.querySelector(".stories-card__stories");e.addEventListener("click",(()=>{e.classList.contains("pause")?this.stories.pause():this.stories.play()}));const s=t;let i,r=0,n=0,o=0,a=0,d=0;s.addEventListener("pointerdown",(e=>{r=e.clientX,n=e.clientY,d=performance.now(),i=setTimeout((()=>{}),100),this.stories.pause()})),s.addEventListener("pointerup",(e=>{clearTimeout(i),o=e.clientX,a=e.clientY;const s=performance.now()-d;if(this.stories.play(),s<100&&Math.abs(o-r)<5&&Math.abs(a-n)<5&&isMobile()&&document.documentElement.clientWidth<920){const s=.75*t.clientWidth;if(e.clientX>s){if(this.stories.isStart)return void this.onBeforeStartFns.forEach((e=>e()));this.stories.prev()}else{if(this.stories.isEnd)return void this.onEndFns.forEach((e=>e()));this.stories.next()}}})),s.addEventListener("pointermove",(e=>{performance.now()-d<100&&(o=e.clientX,a=e.clientY,(Math.abs(o-r)>10||Math.abs(a-n)>10)&&clearTimeout(i))})),s.addEventListener("pointercancel",(()=>{clearTimeout(i)})),s.addEventListener("pointerleave",(()=>{clearTimeout(i)}))}}{const y=document.querySelector('[data-slider="stories-carousel"]');if(y){const g=y.querySelector(".swiper-wrapper"),v=y.querySelector(".btn-left"),A=y.querySelector(".btn-right"),f=document.querySelector("[data-stories-popup]");function a({updateActiveSlide:e,loadMoreStoriesCards:t}){return new Swiper(y.querySelector(".swiper"),{effect:"cube",grabCursor:!0,speed:400,threshold:10,cubeEffect:{shadow:!0,slideShadows:!0,shadowOffset:20,shadowScale:.94},on:{slideChangeTransitionStart:async s=>{await e(s),setTimeout((()=>{t(s)}),400)}}})}function d({checkButtonsVisibility:e,updateActiveSlide:t,loadMoreStoriesCards:s}){return new Swiper(y.querySelector(".swiper"),{grabCursor:!0,centeredSlides:!0,slidesPerView:1,touchRatio:0,grabCursor:!1,speed:400,on:{init:t=>{e(t)},slideChangeTransitionStart:async i=>{await t(i),setTimeout((()=>{s(i)}),400),e(i)}}})}function l({slideTo:e,nextSlide:t,prevSlide:s,swiper:i}){y.addEventListener("click",(t=>{if(t.target.closest(".stories-card")){const s=t.target.closest(".swiper-slide");if(!s.classList.contains("swiper-slide-active")){const t=Array.from(g.children).indexOf(s);e(t)}}})),v.addEventListener("click",(()=>{const e=i.slides[i.realIndex]?.storyCard;e&&e.stories&&(e.stories.isEnd?t():e.stories.next())})),A.addEventListener("click",(()=>{const e=i.slides[i.realIndex]?.storyCard;e&&e.stories&&(e.stories.isStart?s():e.stories.prev())}))}function c({initSwiper:e,initEvents:t}){let s=null;const i=e({checkButtonsVisibility:r,updateActiveSlide:async function(e){const t=e.slides[e.realIndex]?.storyCard;if(!t)return;t.storyCardData||await new Promise((e=>{t.onCanPlay((()=>{e()}))}));if(!t.stories)return;t.hidePreview(),t.play(),s?.showPreview(),s?.stories?.reset(),s=t},loadMoreStoriesCards:async function(e){const t=function(e){const t=e.realIndex,s=e.slides.length;if(s-t==2)return"last2";if(s-t==1)return"last1";if(s-t===s)return"first1";if(s-t==s-1)return"first2";return!1}(e);if(!t)return;if("last2"===t){const t=e.slides[e.realIndex+1]?.storyCard;if(!t)return;t.storyCardData||await new Promise((e=>{t.onLoad((()=>{e()}))}));const s=t.storyCardData;if(s.hasNext){if(e.slides.some((e=>e.storyCard.cardId==s.hasNext)))return;l({data:s,twice:!1,isAppend:!0})}{const t=e.slides[e.realIndex-1]?.storyCard;if(!t)return;t.storyCardData||await new Promise((e=>{t.onLoad((()=>{e()}))}));const s=t.storyCardData;if(s.hasPrevious){if(e.slides.some((e=>e.storyCard.cardId==s.hasPrevious)))return;l({data:s,twice:!1,isAppend:!1})}}}if("last1"===t){const t=e.slides[e.realIndex]?.storyCard;if(!t)return;t.storyCardData||await new Promise((e=>{t.onLoad((()=>{e()}))}));const s=t.storyCardData;if(s.hasNext){if(e.slides.some((e=>e.storyCard.cardId==s.hasNext)))return;l({data:s,twice:!0,isAppend:!0})}}if("first2"===t){const t=e.slides[e.realIndex-1]?.storyCard;if(!t)return;t.storyCardData||await new Promise((e=>{t.onLoad((()=>{e()}))}));const s=t.storyCardData;if(s.hasPrevious){if(e.slides.some((e=>e.storyCard.cardId==s.hasPrevious)))return;l({data:s,twice:!1,isAppend:!1})}}if("first1"===t){const t=e.slides[e.realIndex]?.storyCard;if(!t)return;t.storyCardData||await new Promise((e=>{t.onLoad((()=>{e()}))}));const s=t.storyCardData;if(s.hasPrevious){if(e.slides.some((e=>e.storyCard.cardId==s.hasPrevious)))return;l({data:s,twice:!0,isAppend:!1})}}}});function r(e){e.isBeginning?A.classList.add("hidden"):A.classList.remove("hidden"),e.isEnd?v.classList.add("hidden"):v.classList.remove("hidden");const t=e.slides[e.realIndex]?.storyCard;t&&t.stories&&(t.stories.isStart?A.classList.add("stories-start"):A.classList.remove("stories-start"),t.stories.isEnd?v.classList.add("stories-end"):v.classList.remove("stories-end"))}function n(){const e=document.createElement("div");e.className="swiper-slide";const t=document.createElement("div");return t.className="stories-card-shimmer",e.append(t),{slide:e,shimmer:t}}async function a(){i.slideNext()}async function d(){i.slidePrev()}function l({data:e,twice:t=!1,isAppend:s=!0}){const{slide:l,shimmer:h}=n();s?i.appendSlide(l):i.prependSlide(l),c(s);const p=s?e.hasNext:e.hasPrevious;l.storyCard=new o({cardId:p,htmlShimmerElement:h}),t&&l.storyCard.onLoad((e=>{const t=s?e.hasNext:e.hasPrevious;if(t){const{slide:e,shimmer:l}=n();s?i.appendSlide(e):i.prependSlide(e),c(s),e.storyCard=new o({cardId:t,htmlShimmerElement:l}),e.storyCard.onEnd((()=>{a()})),e.storyCard.onBeforeStart((()=>{d()})),e.storyCard.onStoryChange((()=>{r(i)})),e.storyCard.init()}})),l.storyCard.onEnd((()=>{a()})),l.storyCard.onBeforeStart((()=>{d()})),l.storyCard.onStoryChange((()=>{r(i)})),l.storyCard.init()}function c(e=!0){const t=i.slides.length;if(t<=5)return;const s=t-5;let r=null;r=e?i.slides.slice(0,s):i.slides.slice(-1*s);const n=r.map((e=>i.slides.indexOf(e)));i.removeSlide(n)}t&&t({slideTo:async function(e){i.slideTo(e)},nextSlide:a,prevSlide:d,swiper:i}),document.addEventListener("click",(e=>{if(e.target.closest('[data-action="open-stories"]')){e.preventDefault();const t=e.target.closest('[data-action="open-stories"]'),l=t.getAttribute("data-id");if(!l)return;const c=t.hasAttribute("data-single");h(!0),m(!0),f.classList.add("stories-popup--open"),function({id:e,isSingleStory:t=!1}){if(function(e){return Array.from(g.children).some((t=>{const s=t.firstElementChild;return!!s&&s.getAttribute("data-id")==e}))}(e)){const t=Array.from(g.children).findIndex((t=>{if(t.classList.contains("swiper-cube-shadow"))return;return t.firstElementChild.getAttribute("data-id")==e}))-1;if(i.activeIndex===t){const e=i.slides[i.realIndex]?.storyCard;if(!e)return;e.play()}else i.slideTo(t,0)}else{i.removeAllSlides();const{slide:l,shimmer:c}=n();i.appendSlide(l),l.storyCard=new o({cardId:e,htmlShimmerElement:c}),l.storyCard.onLoad((e=>{t||function(e){if(e.hasNext){const t=i.slides.some((t=>t.storyCard.cardId==e.hasNext));if(t)return;const{slide:s,shimmer:l}=n();i.appendSlide(s),s.storyCard=new o({cardId:e.hasNext,htmlShimmerElement:l}),s.storyCard.onLoad((e=>{if(e.hasNext){const{slide:t,shimmer:s}=n();i.appendSlide(t),t.storyCard=new o({cardId:e.hasNext,htmlShimmerElement:s}),t.storyCard.onEnd((()=>{a()})),t.storyCard.onBeforeStart((()=>{d()})),t.storyCard.onStoryChange((()=>{r(i)})),t.storyCard.init()}})),s.storyCard.onEnd((()=>{a()})),s.storyCard.onBeforeStart((()=>{d()})),s.storyCard.onStoryChange((()=>{r(i)})),s.storyCard.init()}if(e.hasPrevious){const t=i.slides.some((t=>t.storyCard.cardId==e.hasPrevious));if(t)return;const{slide:s,shimmer:l}=n();i.prependSlide(s),s.storyCard=new o({cardId:e.hasPrevious,htmlShimmerElement:l}),s.storyCard.onLoad((e=>{if(e.hasPrevious){const{slide:t,shimmer:s}=n();i.prependSlide(t),t.storyCard=new o({cardId:e.hasPrevious,htmlShimmerElement:s}),t.storyCard.onEnd((()=>{a()})),t.storyCard.onBeforeStart((()=>{d()})),t.storyCard.onStoryChange((()=>{r(i)})),t.storyCard.init()}})),s.storyCard.onStoryChange((()=>{r(i)})),s.storyCard.onEnd((()=>{a()})),s.storyCard.onBeforeStart((()=>{d()})),s.storyCard.init()}}(e)})),l.storyCard.onCanPlay((()=>{r(i),l.storyCard.hidePreview(),l.storyCard.play()})),l.storyCard.onEnd((()=>{a()})),l.storyCard.onBeforeStart((()=>{d()})),l.storyCard.onStoryChange((()=>{r(i)})),l.storyCard.init(),s=l.storyCard}}({id:l,isSingleStory:c})}if(e.target.closest('[data-action="close-stories"]')){e.preventDefault(),h(!1),m(!1),f.classList.remove("stories-popup--open");const t=i.slides[i.realIndex]?.storyCard;if(!t)return;t.pause(),t.stories.reset()}}))}y.addEventListener("touchmove",(function(e){const t=e.touches;t&&(t[0].clientY<50||t[0].clientY>window.innerHeight-50)&&(e.preventDefault(),e.stopImmediatePropagation())}),{passive:!1}),document.documentElement.clientWidth<920?c({initSwiper:a}):c({initSwiper:d,initEvents:l})}}function h(e){if(e){const e=p();document.documentElement?.classList.add("overflow-hidden"),document.body?.classList.add("overflow-hidden"),document.documentElement.style.paddingRight=e+"px"}else document.documentElement?.classList.remove("overflow-hidden"),document.body?.classList.remove("overflow-hidden"),document.documentElement.style.removeProperty("padding-right")}function p(){return window.innerWidth-document.querySelector("body").offsetWidth}function m(e){if(e){const e=p();document.documentElement.style.paddingRight=e+"px"}else document.documentElement.style.paddingRight="0px"}}));